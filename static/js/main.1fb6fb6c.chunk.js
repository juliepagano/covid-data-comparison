(this["webpackJsonpcovid-data-comparison"]=this["webpackJsonpcovid-data-comparison"]||[]).push([[0],{51:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},76:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a.n(r),s=a(43),i=a.n(s),o=(a(51),a(21)),l=a(5),u=a(17),h=a(7),d=a.n(h),b=a(16),v=a(20),p=a(11),f=a(13),j=a(24),O=a.n(j),m=a(31),x=a(32),y="https://api.covidtracking.com/v2beta";function g(e){return S.apply(this,arguments)}function S(){return(S=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(m.a)(t,"yyyy-MM-dd"),e.abrupt("return",O.a.get("".concat(y,"/us/daily/").concat(a,".json")));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return k.apply(this,arguments)}function k(){return(k=Object(f.a)(d.a.mark((function e(){var t,a,n,r,c,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date,e.prev=1,e.next=4,g(n);case 4:r=e.sent,e.next=18;break;case 7:if(e.prev=7,e.t0=e.catch(1),404!==(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c?void 0:c.status)){e.next=18;break}return e.prev=10,e.next=13,g(Object(x.a)(n,1));case 13:r=e.sent,e.next=18;break;case 16:e.prev=16,e.t1=e.catch(10);case 18:if(!(null===(t=r)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.data)){e.next=20;break}return e.abrupt("return",null===(s=r)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.data);case 20:throw new Error("Unable to load latest US data.");case 21:case"end":return e.stop()}}),e,null,[[1,7],[10,16]])})))).apply(this,arguments)}function C(e,t){return U.apply(this,arguments)}function U(){return(U=Object(f.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(m.a)(a,"yyyy-MM-dd"),e.abrupt("return",O.a.get("".concat(y,"/states/").concat(t.toLowerCase(),"/").concat(n,".json")));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return D.apply(this,arguments)}function D(){return(D=Object(f.a)(d.a.mark((function e(t){var a,n,r,c,s,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Date,e.prev=1,e.next=4,C(t,r);case 4:c=e.sent,e.next=18;break;case 7:if(e.prev=7,e.t0=e.catch(1),404!==(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.status)){e.next=18;break}return e.prev=10,e.next=13,C(t,Object(x.a)(r,1));case 13:c=e.sent,e.next=18;break;case 16:e.prev=16,e.t1=e.catch(10);case 18:if(!(null===(a=c)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.data)){e.next=20;break}return e.abrupt("return",null===(i=c)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.data);case 20:throw new Error("Unable to load latest ".concat(t," data."));case 21:case"end":return e.stop()}}),e,null,[[1,7],[10,16]])})))).apply(this,arguments)}function E(){return M.apply(this,arguments)}function M(){return(M=Object(f.a)(d.a.mark((function e(){var t,a,n,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(y,"/states.json"));case 3:n=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:if(!(null===(t=n)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.data)){e.next=10;break}return e.abrupt("return",null===(r=n)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.data);case 10:throw new Error("Unable to load state metadata.");case 11:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var A=a(28),I=a.n(A),W=a(23),F=a.n(W),N=a(44),V=a.n(N),_=(a(71),Math.pow(5,2)),P=Math.pow(2,2)*_;var H=function(e){var t,a,c=e.label,s=e.value,i=e.source,o=e.scaleValue,l=e.color,u=e.highlight,h=e.minWidth,d=void 0===h?250:h,b=e.maxWidth,v=void 0===b?500:b,f=Math.ceil(s/o),j=Math.floor((v-2+12)/122),O=Math.ceil(f/P),m=Math.min(j,O),x=Math.ceil(O/m),y=0,g=0,S=function(e,t,a,c){return Object(p.a)(Array(5)).map((function(s,i){var o=t+11*i;return Object(p.a)(Array(5)).map((function(t,s){var u=e+11*s,h=a+5*i+s;return h>=c?null:(y=o+8+1,g=Math.max(u+8+1,g),Object(n.jsx)(r.Fragment,{children:Object(n.jsx)("rect",{fill:l,fillOpacity:.5,stroke:"#000",strokeWidth:1,width:8,height:8,x:u,y:o,"data-box-key":h})},h))}))}))},w=function(e,t,a,c){return Object(p.a)(Array(2)).map((function(s,i){var o=t+58*i;return Object(p.a)(Array(2)).map((function(t,s){var l=e+58*s,u=a+(2*i+s)*_;return u>=c?null:Object(n.jsx)(r.Fragment,{children:S(l,o,u,c)},u)}))}))},k=(t=1,a=1,Object(p.a)(Array(x)).map((function(e,c){var s=a+122*c;return Object(p.a)(Array(m)).map((function(e,a){var i=t+122*a,o=(c*m+a)*P;return o>=f?null:Object(n.jsx)(r.Fragment,{children:w(i,s,o,f)},o)}))})));return Object(n.jsxs)("figure",{className:"SquareChart",style:{minWidth:d},children:[Object(n.jsxs)("figcaption",{children:[Object(n.jsxs)("span",{className:V()({highlight:u}),children:[c," (",F()(s).format({thousandSeparated:!0,mantissa:0}),")"," "]}),i&&Object(n.jsxs)("span",{className:"SquareChart-source",children:["[",Object(n.jsx)("a",{href:i,children:"source"}),"]"]})]}),Object(n.jsx)("svg",{width:g,height:y,children:k})]})},K=(a(72),function(e){var t=e.entries,a=e.scale,r=e.color;return Object(n.jsxs)("section",{className:"ScaleChart",children:[Object(n.jsx)("h2",{children:F()(a).format({thousandSeparated:!0,mantissa:0})}),t.map((function(e){var t=e.label,c=e.isCovid,s=(e.dataType,Object(v.a)(e,["label","isCovid","dataType"]));return Object(n.jsx)(H,Object(b.a)({label:t,scaleValue:a,color:r,highlight:c},s),t)}))]})}),B=(a(73),function(e){var t=e.chartScales;return Object(n.jsx)("div",{className:"DataCharts",children:t.map((function(e){var t=e.color,a=e.scale,r=e.entries;return r.length?Object(n.jsx)(K,{color:t,scale:a,entries:r},a):null}))})}),q=[{label:"Total deaths from Covid",dataKey:"outcomes.death.total.value"},{label:"Today's deaths from Covid",dataKey:"outcomes.death.total.calculated.change_from_prior_day"}],J=[{color:"green",scale:1,entries:[]},{color:"blue",scale:10,entries:[{label:"Oklahoma City Bombings",value:168},{label:"Jonestown",value:918},{label:"Columbine",value:15},{label:"Waco siege",value:86}]},{color:"orange",scale:1e3,entries:[{label:"US deaths in Vietnam War",value:58209},{label:"US motor vehicle traffic deaths in 2019",value:37595},{label:"9/11",value:2996},{label:"Deaths from flu and pneumonia in 2019",value:49783},{label:"Deaths from homicide in 2019",value:19141},{label:"Attack on Pearl Harbor",value:2467},{label:"Hurricane Katrina",value:1833},{label:"US deaths in Iraq War",value:4497}]},{color:"black",scale:1e5,entries:[{label:"HIV/AIDS in the US as of 2018",value:7e5},{label:"1918 Spanish Flu in the US",value:675e3},{label:"Deaths in US Civil War",value:655e3},{label:"US deaths in WWII",value:405399},{label:"US deaths in WWI",value:116516},{label:"Unintentional injury deaths in 2019",value:173040}]}],L=[].concat(J).reverse();var Q=function(e){var t=e.showStates,a=e.showUS,c=Object(r.useState)(),s=Object(u.a)(c,2),i=s[0],o=s[1],l=Object(r.useState)(),h=Object(u.a)(l,2),j=h[0],O=h[1];return Object(r.useEffect)((function(){function e(){return(e=Object(f.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=J.reduce((function(e,t){var a=t.scale;return e.set(a,[]),e}),new Map),e.prev=1,e.next=4,w();case 4:a=e.sent,q.forEach((function(e){var n=e.label,r=e.dataKey,c=I()(a,r);if("number"===typeof c){var s=L.find((function(e){return c>=e.scale}));s&&t.set(s.scale,[].concat(Object(p.a)(t.get(s.scale)),[{label:"US: ".concat(n),value:c,isCovid:!0,dataType:"US_COVID",source:"https://covidtracking.com/"}]))}})),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.prev=10,e.next=13,E();case 13:return n=e.sent,e.next=16,Promise.all(n.map((function(e){return T(e.state_code)})));case 16:e.sent.forEach((function(e){var a=e.state;q.forEach((function(n){var r=n.label,c=n.dataKey,s=I()(e,c);if("number"===typeof s){var i=L.find((function(e){return s>=e.scale}));i&&t.set(i.scale,[].concat(Object(p.a)(t.get(i.scale)),[{label:"".concat(a,": ").concat(r),value:s,isCovid:!0,dataType:"STATE_COVID",source:"https://covidtracking.com/"}]))}}))})),e.next=22;break;case 20:e.prev=20,e.t1=e.catch(10);case 22:r=J.map((function(e){var a=e.entries,n=e.scale,r=Object(v.a)(e,["entries","scale"]),c=[].concat(Object(p.a)(a),Object(p.a)(t.get(n))).sort((function(e,t){return e.value-t.value}));return Object(b.a)(Object(b.a)({},r),{},{scale:n,entries:c})})),o(r);case 24:case"end":return e.stop()}}),e,null,[[1,8],[10,20]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){if(i){var e=["OTHER"];t&&e.push("STATE_COVID"),a&&e.push("US_COVID");var n=i.map((function(t){var a=t.entries,n=Object(v.a)(t,["entries"]);return Object(b.a)(Object(b.a)({},n),{},{entries:a.filter((function(t){var a=t.dataType,n=void 0===a?"OTHER":a;return e.includes(n)}))})}));O(n)}}),[i,t,a]),j?Object(n.jsx)(B,{chartScales:j}):null},R=a(14),z=a.n(R),G=(a(76),function(){var e=Object(l.e)(),t=Object(l.f)();return Object(n.jsxs)("header",{className:"ControlBar",children:[Object(n.jsxs)("label",{children:["State Covid Data",Object(n.jsx)("input",{type:"checkbox",onClick:function(a){var n=z.a.parse(t.search,{ignoreQueryPrefix:!0});n.showStates=a.currentTarget.checked.toString(),e.push({pathname:t.pathname,search:z.a.stringify(n)})}})]}),Object(n.jsxs)("label",{children:["US Covid Data",Object(n.jsx)("input",{type:"checkbox",onClick:function(a){var n=z.a.parse(t.search,{ignoreQueryPrefix:!0});n.showUS=a.currentTarget.checked.toString(),e.push({pathname:t.pathname,search:z.a.stringify(n)})}})]})]})});a(84);var X=function(){var e=Object(l.f)(),t=Object(r.useState)(!1),a=Object(u.a)(t,2),c=a[0],s=a[1],i=Object(r.useState)(!1),o=Object(u.a)(i,2),h=o[0],d=o[1];return Object(r.useEffect)((function(){var t=z.a.parse(e.search,{ignoreQueryPrefix:!0});s("true"===t.showStates),d("true"===t.showUS)}),[e]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(G,{}),Object(n.jsx)("div",{className:"App-content",children:Object(n.jsx)(Q,{showStates:c,showUS:h})})]})},Y=function(){return Object(n.jsx)(o.a,{children:Object(n.jsx)(l.a,{path:"/",children:Object(n.jsx)(X,{})})})},Z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,86)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(Y,{})}),document.getElementById("root")),Z()}},[[85,1,2]]]);
//# sourceMappingURL=main.1fb6fb6c.chunk.js.map