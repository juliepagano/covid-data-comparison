(this["webpackJsonpcovid-data-comparison"]=this["webpackJsonpcovid-data-comparison"]||[]).push([[0],{52:function(e,a,t){},72:function(e,a,t){},73:function(e,a,t){},74:function(e,a,t){},77:function(e,a,t){},85:function(e,a,t){},86:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t(0),c=t.n(r),s=t(45),l=t.n(s),i=(t(52),t(22)),o=t(5),u=t(21),d=t(7),h=t.n(d),v=t(13),b=t(16),p=t(14),f=t(8),j=t(25),m=t.n(j),O=t(33),x=t(34),y="https://api.covidtracking.com/v2beta";function w(e){return g.apply(this,arguments)}function g(){return(g=Object(p.a)(h.a.mark((function e(a){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(O.a)(a,"yyyy-MM-dd"),e.abrupt("return",m.a.get("".concat(y,"/us/daily/").concat(t,".json")));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return k.apply(this,arguments)}function k(){return(k=Object(p.a)(h.a.mark((function e(){var a,t,n,r,c,s,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date,e.prev=1,e.next=4,w(n);case 4:r=e.sent,e.next=18;break;case 7:if(e.prev=7,e.t0=e.catch(1),404!==(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c?void 0:c.status)){e.next=18;break}return e.prev=10,e.next=13,w(Object(x.a)(n,1));case 13:r=e.sent,e.next=18;break;case 16:e.prev=16,e.t1=e.catch(10);case 18:if(!(null===(a=r)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.data)){e.next=20;break}return e.abrupt("return",null===(s=r)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.data);case 20:throw new Error("Unable to load latest US data.");case 21:case"end":return e.stop()}}),e,null,[[1,7],[10,16]])})))).apply(this,arguments)}function T(e,a){return C.apply(this,arguments)}function C(){return(C=Object(p.a)(h.a.mark((function e(a,t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(O.a)(t,"yyyy-MM-dd"),e.abrupt("return",m.a.get("".concat(y,"/states/").concat(a.toLowerCase(),"/").concat(n,".json")));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return E.apply(this,arguments)}function E(){return(E=Object(p.a)(h.a.mark((function e(a){var t,n,r,c,s,l,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Date,e.prev=1,e.next=4,T(a,r);case 4:c=e.sent,e.next=18;break;case 7:if(e.prev=7,e.t0=e.catch(1),404!==(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.status)){e.next=18;break}return e.prev=10,e.next=13,T(a,Object(x.a)(r,1));case 13:c=e.sent,e.next=18;break;case 16:e.prev=16,e.t1=e.catch(10);case 18:if(!(null===(t=c)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data)){e.next=20;break}return e.abrupt("return",null===(l=c)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.data);case 20:throw new Error("Unable to load latest ".concat(a," data."));case 21:case"end":return e.stop()}}),e,null,[[1,7],[10,16]])})))).apply(this,arguments)}function D(){return N.apply(this,arguments)}function N(){return(N=Object(p.a)(h.a.mark((function e(){var a,t,n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("".concat(y,"/states.json"));case 3:n=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:if(!(null===(a=n)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.data)){e.next=10;break}return e.abrupt("return",null===(r=n)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.data);case 10:throw new Error("Unable to load state metadata.");case 11:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var U=t(29),_=t.n(U),I=t(24),W=t(19),M=t.n(W),V=(t(72),Math.pow(5,2)),L=Math.pow(2,2)*V;var H=function(e){var a,t,c=e.label,s=e.value,l=e.source,i=e.scaleValue,o=e.color,u=e.highlight,d=e.minWidth,h=void 0===d?250:d,v=e.maxWidth,b=void 0===v?500:v,p=e.layout,j=void 0===p?"stack":p,m=Math.ceil(s/i),O=Math.floor((b-2+12)/122),x=Math.ceil(m/L),y=Math.min(O,x),w=Math.ceil(x/y),g=0,S=0,k=function(e,a,t,c){return Object(f.a)(Array(5)).map((function(s,l){var i=a+11*l;return Object(f.a)(Array(5)).map((function(a,s){var u=e+11*s,d=t+5*l+s;return d>=c?null:(g=Math.max(i+8+1,g),S=Math.max(u+8+1,S),Object(n.jsx)(r.Fragment,{children:Object(n.jsx)("rect",{fill:o,fillOpacity:.5,stroke:"#000",strokeWidth:1,width:8,height:8,x:u,y:i,"data-box-key":d})},d))}))}))},T=function(e,a,t,c){return Object(f.a)(Array(2)).map((function(s,l){var i=a+58*l;return Object(f.a)(Array(2)).map((function(a,s){var o=e+58*s,u=t+(2*l+s)*V;return u>=c?null:Object(n.jsx)(r.Fragment,{children:k(o,i,u,c)},u)}))}))},C=(a=1,t=1,Object(f.a)(Array(w)).map((function(e,c){var s=t+122*c;return Object(f.a)(Array(y)).map((function(e,t){var l=a+122*t,i=(c*y+t)*L;return i>=m?null:Object(n.jsx)(r.Fragment,{children:T(l,s,i,m)},i)}))})));return Object(n.jsxs)("figure",{className:M()("SquareChart",Object(I.a)({},j,j)),style:{minWidth:h},children:[c&&Object(n.jsxs)("figcaption",{children:[Object(n.jsx)("span",{className:M()({highlight:u}),children:c})," ",l&&Object(n.jsxs)("span",{className:"SquareChart-source",children:["[",Object(n.jsx)("a",{href:l,children:"source"}),"]"]})]}),Object(n.jsx)("svg",{width:S,height:g,children:C})]})},P=t(30),R=t.n(P),F=(t(73),function(e){var a=e.entries,t=e.scale,r=e.color,c=e.prevScale;return Object(n.jsxs)("section",{className:"ScaleChart",children:[function(){var e=Object(n.jsx)("div",{className:"equals",children:"="}),a=Object(n.jsxs)("div",{className:M()("value",{hasPrev:c}),children:["(",R()(t).format({thousandSeparated:!0,mantissa:0})," ","deaths)"]}),s=Object(n.jsx)(H,{layout:"inline",scaleValue:t,value:t,color:r,minWidth:0});return c?Object(n.jsxs)("div",{className:"Legend",children:[c&&Object(n.jsx)(H,{layout:"inline",scaleValue:c.scale,value:t,color:c.color,minWidth:0}),e,s,a]}):Object(n.jsxs)("div",{className:"Legend",children:[s,e,a]})}(),a.map((function(e){var a=e.label,c=e.isCovid,s=(e.dataType,e.value),l=Object(b.a)(e,["label","isCovid","dataType","value"]),i=R()(s).format({thousandSeparated:!0,mantissa:0});return Object(n.jsx)(H,Object(v.a)({label:"".concat(a," (").concat(i,")"),value:s,scaleValue:t,color:r,highlight:c},l),a)}))]})}),K=(t(74),function(e){var a,t=e.chartScales;return Object(n.jsx)("div",{className:"DataCharts",children:t.map((function(e){var t=e.color,r=e.scale,c=e.entries;if(!c.length)return null;var s=Object(n.jsx)(F,{color:t,scale:r,entries:c,prevScale:a},r);return a={color:t,scale:r},s}))})}),q=[{label:"US motor vehicle traffic deaths in 2019",value:37595,source:"https://www.cdc.gov/nchs/fastats/accidental-injury.htm"},{label:"Deaths from flu and pneumonia in 2019",value:49783,source:"https://www.cdc.gov/nchs/fastats/flu.htm"},{label:"Deaths from homicide in 2019",value:19141,source:"https://www.cdc.gov/nchs/fastats/homicide.htm"},{label:"Unintentional injury deaths in 2019",value:173040,source:"https://www.cdc.gov/nchs/fastats/accidental-injury.htm"}],B=[{label:"HIV/AIDS in the US as of 2018",value:7e5,source:"https://www.kff.org/"},{label:"1918 Spanish Flu in the US",value:675e3,source:"https://www.cdc.gov/flu/pandemic-resources/1918-pandemic-h1n1.html"}],J=[{label:"US Covid Data",name:"showUS",dataType:"US_COVID"},{label:"State Covid Data",name:"showStates",dataType:"STATE_COVID"},{label:"Annual US Death Stats",name:"showAnnualDeaths",dataType:"ANNUAL_DEATH_STATS"},{label:"Other pandemics",name:"showPandemics",dataType:"OTHER_PANDEMICS"},{label:"Wars",name:"showWars",dataType:"WARS"},{label:"Natural Disasters",name:"showNaturalDisasters",dataType:"NATURAL_DISASTERS"},{label:"Terrorism and other acts of violence",name:"showViolence",dataType:"VIOLENCE"}],Q=[{label:"9/11",value:2996},{label:"Jonestown",value:918},{label:"Columbine",value:15},{label:"Waco siege",value:86},{label:"Oklahoma City Bombings",value:168}],z=[{label:"US deaths in Vietnam War",value:58209},{label:"Attack on Pearl Harbor",value:2467},{label:"US deaths in Iraq War",value:4497},{label:"Deaths in US Civil War",value:655e3},{label:"US deaths in WWII",value:405399},{label:"US deaths in WWI",value:116516}],G=[{label:"Hurricane Katrina (estimated)",value:1836,source:"https://en.wikipedia.org/wiki/Hurricane_Katrina#Impact"},{label:"1995 Chicago heat wave ",value:739,source:"https://en.wikipedia.org/wiki/1995_Chicago_heat_wave"}],X=[{color:"green",scale:1,entries:[]},{color:"blue",scale:10,entries:[]},{color:"orange",scale:1e3,entries:[]},{color:"black",scale:1e5,entries:[]}],Y=[{label:"Total deaths from Covid",dataKey:"outcomes.death.total.value"},{label:"Today's deaths from Covid",dataKey:"outcomes.death.total.calculated.change_from_prior_day"}],Z=Object(f.a)(X).reverse();function $(e){return Z.find((function(a){return e>=a.scale}))}var ee=function(e){var a=e.optionsConfig,t=Object(r.useState)(),c=Object(u.a)(t,2),s=c[0],l=c[1],i=Object(r.useState)(),o=Object(u.a)(i,2),d=o[0],j=o[1];return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(h.a.mark((function e(){var a,t,n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=X.reduce((function(e,a){var t=a.scale;return e.set(t,[]),e}),new Map),(t=function(e,t){e.forEach((function(e){var n=e.value,r=Object(b.a)(e,["value"]);if("number"===typeof n){var c=$(n);c&&a.set(c.scale,[].concat(Object(f.a)(a.get(c.scale)),[Object(v.a)(Object(v.a)({},r),{},{value:n,isCovid:!1,dataType:t})]))}}))})(q,"ANNUAL_DEATH_STATS"),t(B,"OTHER_PANDEMICS"),t(Q,"VIOLENCE"),t(z,"WARS"),t(G,"NATURAL_DISASTERS"),e.prev=7,e.next=10,S();case 10:n=e.sent,Y.forEach((function(e){var t=e.label,r=e.dataKey,c=_()(n,r);if("number"===typeof c){var s=$(c);s&&a.set(s.scale,[].concat(Object(f.a)(a.get(s.scale)),[{label:"US: ".concat(t),value:c,isCovid:!0,dataType:"US_COVID",source:"https://covidtracking.com/"}]))}})),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(7);case 16:return e.prev=16,e.next=19,D();case 19:return r=e.sent,e.next=22,Promise.all(r.map((function(e){return A(e.state_code)})));case 22:e.sent.forEach((function(e){var t=e.state;Y.forEach((function(n){var r=n.label,c=n.dataKey,s=_()(e,c);if("number"===typeof s){var l=$(s);l&&a.set(l.scale,[].concat(Object(f.a)(a.get(l.scale)),[{label:"".concat(t,": ").concat(r),value:s,isCovid:!0,dataType:"STATE_COVID",source:"https://covidtracking.com/"}]))}}))})),e.next=28;break;case 26:e.prev=26,e.t1=e.catch(16);case 28:c=X.map((function(e){var t=e.entries,n=e.scale,r=Object(b.a)(e,["entries","scale"]),c=[].concat(Object(f.a)(t),Object(f.a)(a.get(n))).sort((function(e,a){return e.value-a.value}));return Object(v.a)(Object(v.a)({},r),{},{scale:n,entries:c})})),l(c);case 30:case"end":return e.stop()}}),e,null,[[7,14],[16,26]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){if(s){var e=["OTHER"];J.forEach((function(t){var n=t.name,r=t.dataType;a[n]&&e.push(r)}));var t=s.map((function(a,t){var n=a.entries,r=a.scale,c=Object(b.a)(a,["entries","scale"]),s=n.filter((function(a){var t=a.dataType,n=void 0===t?"OTHER":t;return e.includes(n)}));return Object(v.a)(Object(v.a)({},c),{},{scale:r,entries:s})}));j(t)}}),[s,a]),d?Object(n.jsx)(K,{chartScales:d}):null},ae=t(20),te=t.n(ae),ne=(t(77),function(e){var a=e.optionsConfig,t=Object(o.e)(),r=Object(o.f)();return Object(n.jsx)("header",{className:"ControlBar",children:J.map((function(e){var c=e.label,s=e.name;return Object(n.jsxs)("label",{children:[c,Object(n.jsx)("input",{type:"checkbox",name:s,checked:a[s],onChange:function(e){return function(e,a){var n=te.a.parse(r.search,{ignoreQueryPrefix:!0});n[e]=a.currentTarget.checked.toString(),t.push({pathname:r.pathname,search:te.a.stringify(n)})}(s,e)}})]},s)}))})});t(85);var re=function(){var e=Object(o.f)(),a=Object(r.useState)(),t=Object(u.a)(a,2),c=t[0],s=t[1];return Object(r.useEffect)((function(){var a=te.a.parse(e.search,{ignoreQueryPrefix:!0}),t=J.reduce((function(e,t){t.label;var n=t.name;return e[n]="true"===a[n],e}),{});s(t)}),[e]),c?Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(ne,{optionsConfig:c}),Object(n.jsx)("div",{className:"App-content",children:Object(n.jsx)(ee,{optionsConfig:c})})]}):null},ce=function(){return Object(n.jsx)(i.a,{children:Object(n.jsx)(o.a,{path:"/",children:Object(n.jsx)(re,{})})})},se=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,87)).then((function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,c=a.getLCP,s=a.getTTFB;t(e),n(e),r(e),c(e),s(e)}))};l.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(ce,{})}),document.getElementById("root")),se()}},[[86,1,2]]]);
//# sourceMappingURL=main.44b6e035.chunk.js.map