(this["webpackJsonpcovid-data-comparison"]=this["webpackJsonpcovid-data-comparison"]||[]).push([[0],{51:function(e,a,t){},71:function(e,a,t){},72:function(e,a,t){},73:function(e,a,t){},76:function(e,a,t){},84:function(e,a,t){},85:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t(0),c=t.n(r),s=t(43),o=t.n(s),i=(t(51),t(21)),l=t(5),u=t(20),d=t(7),h=t.n(d),v=t(13),b=t(16),p=t(14),f=t(8),j=t(24),m=t.n(j),O=t(31),y=t(32),x="https://api.covidtracking.com/v2beta";function w(e){return g.apply(this,arguments)}function g(){return(g=Object(p.a)(h.a.mark((function e(a){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(O.a)(a,"yyyy-MM-dd"),e.abrupt("return",m.a.get("".concat(x,"/us/daily/").concat(t,".json")));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return T.apply(this,arguments)}function T(){return(T=Object(p.a)(h.a.mark((function e(){var a,t,n,r,c,s,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date,e.prev=1,e.next=4,w(n);case 4:r=e.sent,e.next=18;break;case 7:if(e.prev=7,e.t0=e.catch(1),404!==(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c?void 0:c.status)){e.next=18;break}return e.prev=10,e.next=13,w(Object(y.a)(n,1));case 13:r=e.sent,e.next=18;break;case 16:e.prev=16,e.t1=e.catch(10);case 18:if(!(null===(a=r)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.data)){e.next=20;break}return e.abrupt("return",null===(s=r)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.data);case 20:throw new Error("Unable to load latest US data.");case 21:case"end":return e.stop()}}),e,null,[[1,7],[10,16]])})))).apply(this,arguments)}function k(e,a){return A.apply(this,arguments)}function A(){return(A=Object(p.a)(h.a.mark((function e(a,t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(O.a)(t,"yyyy-MM-dd"),e.abrupt("return",m.a.get("".concat(x,"/states/").concat(a.toLowerCase(),"/").concat(n,".json")));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return E.apply(this,arguments)}function E(){return(E=Object(p.a)(h.a.mark((function e(a){var t,n,r,c,s,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Date,e.prev=1,e.next=4,k(a,r);case 4:c=e.sent,e.next=18;break;case 7:if(e.prev=7,e.t0=e.catch(1),404!==(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.status)){e.next=18;break}return e.prev=10,e.next=13,k(a,Object(y.a)(r,1));case 13:c=e.sent,e.next=18;break;case 16:e.prev=16,e.t1=e.catch(10);case 18:if(!(null===(t=c)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data)){e.next=20;break}return e.abrupt("return",null===(o=c)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.data);case 20:throw new Error("Unable to load latest ".concat(a," data."));case 21:case"end":return e.stop()}}),e,null,[[1,7],[10,16]])})))).apply(this,arguments)}function D(){return U.apply(this,arguments)}function U(){return(U=Object(p.a)(h.a.mark((function e(){var a,t,n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("".concat(x,"/states.json"));case 3:n=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:if(!(null===(a=n)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.data)){e.next=10;break}return e.abrupt("return",null===(r=n)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.data);case 10:throw new Error("Unable to load state metadata.");case 11:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var N=t(28),I=t.n(N),M=t(23),W=t.n(M),_=t(44),V=t.n(_),R=(t(71),Math.pow(5,2)),H=Math.pow(2,2)*R;var L=function(e){var a,t,c=e.label,s=e.value,o=e.source,i=e.scaleValue,l=e.color,u=e.highlight,d=e.minWidth,h=void 0===d?250:d,v=e.maxWidth,b=void 0===v?500:v,p=Math.ceil(s/i),j=Math.floor((b-2+12)/122),m=Math.ceil(p/H),O=Math.min(j,m),y=Math.ceil(m/O),x=0,w=0,g=function(e,a,t,c){return Object(f.a)(Array(5)).map((function(s,o){var i=a+11*o;return Object(f.a)(Array(5)).map((function(a,s){var u=e+11*s,d=t+5*o+s;return d>=c?null:(x=i+8+1,w=Math.max(u+8+1,w),Object(n.jsx)(r.Fragment,{children:Object(n.jsx)("rect",{fill:l,fillOpacity:.5,stroke:"#000",strokeWidth:1,width:8,height:8,x:u,y:i,"data-box-key":d})},d))}))}))},S=function(e,a,t,c){return Object(f.a)(Array(2)).map((function(s,o){var i=a+58*o;return Object(f.a)(Array(2)).map((function(a,s){var l=e+58*s,u=t+(2*o+s)*R;return u>=c?null:Object(n.jsx)(r.Fragment,{children:g(l,i,u,c)},u)}))}))},T=(a=1,t=1,Object(f.a)(Array(y)).map((function(e,c){var s=t+122*c;return Object(f.a)(Array(O)).map((function(e,t){var o=a+122*t,i=(c*O+t)*H;return i>=p?null:Object(n.jsx)(r.Fragment,{children:S(o,s,i,p)},i)}))})));return Object(n.jsxs)("figure",{className:"SquareChart",style:{minWidth:h},children:[Object(n.jsxs)("figcaption",{children:[Object(n.jsxs)("span",{className:V()({highlight:u}),children:[c," (",W()(s).format({thousandSeparated:!0,mantissa:0}),")"," "]}),o&&Object(n.jsxs)("span",{className:"SquareChart-source",children:["[",Object(n.jsx)("a",{href:o,children:"source"}),"]"]})]}),Object(n.jsx)("svg",{width:w,height:x,children:T})]})},P=(t(72),function(e){var a=e.entries,t=e.scale,r=e.color;return Object(n.jsxs)("section",{className:"ScaleChart",children:[Object(n.jsx)("h2",{children:W()(t).format({thousandSeparated:!0,mantissa:0})}),a.map((function(e){var a=e.label,c=e.isCovid,s=(e.dataType,Object(b.a)(e,["label","isCovid","dataType"]));return Object(n.jsx)(L,Object(v.a)({label:a,scaleValue:t,color:r,highlight:c},s),a)}))]})}),F=(t(73),function(e){var a=e.chartScales;return Object(n.jsx)("div",{className:"DataCharts",children:a.map((function(e){var a=e.color,t=e.scale,r=e.entries;return r.length?Object(n.jsx)(P,{color:a,scale:t,entries:r},t):null}))})}),K=[{label:"US motor vehicle traffic deaths in 2019",value:37595,source:"https://www.cdc.gov/nchs/fastats/accidental-injury.htm"},{label:"Deaths from flu and pneumonia in 2019",value:49783,source:"https://www.cdc.gov/nchs/fastats/flu.htm"},{label:"Deaths from homicide in 2019",value:19141,source:"https://www.cdc.gov/nchs/fastats/homicide.htm"},{label:"Unintentional injury deaths in 2019",value:173040,source:"https://www.cdc.gov/nchs/fastats/accidental-injury.htm"}],B=[{label:"HIV/AIDS in the US as of 2018",value:7e5,source:"https://www.kff.org/"},{label:"1918 Spanish Flu in the US",value:675e3,source:"https://www.cdc.gov/flu/pandemic-resources/1918-pandemic-h1n1.html"}],q=[{label:"US Covid Data",name:"showUS",dataType:"US_COVID"},{label:"State Covid Data",name:"showStates",dataType:"STATE_COVID"},{label:"Annual US Death Stats",name:"showAnnualDeaths",dataType:"ANNUAL_DEATH_STATS"},{label:"Other pandemics",name:"showPandemics",dataType:"OTHER_PANDEMICS"},{label:"Wars",name:"showWars",dataType:"WARS"},{label:"Natural Disasters",name:"showNaturalDisasters",dataType:"NATURAL_DISASTERS"},{label:"Terrorism and other acts of violence",name:"showViolence",dataType:"VIOLENCE"}],J=[{label:"9/11",value:2996},{label:"Jonestown",value:918},{label:"Columbine",value:15},{label:"Waco siege",value:86},{label:"Oklahoma City Bombings",value:168}],Q=[{label:"US deaths in Vietnam War",value:58209},{label:"Attack on Pearl Harbor",value:2467},{label:"US deaths in Iraq War",value:4497},{label:"Deaths in US Civil War",value:655e3},{label:"US deaths in WWII",value:405399},{label:"US deaths in WWI",value:116516}],z=[{label:"Hurricane Katrina",value:1833}],G=[{color:"green",scale:1,entries:[]},{color:"blue",scale:10,entries:[]},{color:"orange",scale:1e3,entries:[]},{color:"black",scale:1e5,entries:[]}],X=[{label:"Total deaths from Covid",dataKey:"outcomes.death.total.value"},{label:"Today's deaths from Covid",dataKey:"outcomes.death.total.calculated.change_from_prior_day"}],Y=Object(f.a)(G).reverse();function Z(e){return Y.find((function(a){return e>=a.scale}))}var $=function(e){var a=e.optionsConfig,t=Object(r.useState)(),c=Object(u.a)(t,2),s=c[0],o=c[1],i=Object(r.useState)(),l=Object(u.a)(i,2),d=l[0],j=l[1];return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(h.a.mark((function e(){var a,t,n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=G.reduce((function(e,a){var t=a.scale;return e.set(t,[]),e}),new Map),(t=function(e,t){e.forEach((function(e){var n=e.value,r=Object(b.a)(e,["value"]);if("number"===typeof n){var c=Z(n);c&&a.set(c.scale,[].concat(Object(f.a)(a.get(c.scale)),[Object(v.a)(Object(v.a)({},r),{},{value:n,isCovid:!1,dataType:t})]))}}))})(K,"ANNUAL_DEATH_STATS"),t(B,"OTHER_PANDEMICS"),t(J,"VIOLENCE"),t(Q,"WARS"),t(z,"NATURAL_DISASTERS"),e.prev=7,e.next=10,S();case 10:n=e.sent,X.forEach((function(e){var t=e.label,r=e.dataKey,c=I()(n,r);if("number"===typeof c){var s=Z(c);s&&a.set(s.scale,[].concat(Object(f.a)(a.get(s.scale)),[{label:"US: ".concat(t),value:c,isCovid:!0,dataType:"US_COVID",source:"https://covidtracking.com/"}]))}})),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(7);case 16:return e.prev=16,e.next=19,D();case 19:return r=e.sent,e.next=22,Promise.all(r.map((function(e){return C(e.state_code)})));case 22:e.sent.forEach((function(e){var t=e.state;X.forEach((function(n){var r=n.label,c=n.dataKey,s=I()(e,c);if("number"===typeof s){var o=Z(s);o&&a.set(o.scale,[].concat(Object(f.a)(a.get(o.scale)),[{label:"".concat(t,": ").concat(r),value:s,isCovid:!0,dataType:"STATE_COVID",source:"https://covidtracking.com/"}]))}}))})),e.next=28;break;case 26:e.prev=26,e.t1=e.catch(16);case 28:c=G.map((function(e){var t=e.entries,n=e.scale,r=Object(b.a)(e,["entries","scale"]),c=[].concat(Object(f.a)(t),Object(f.a)(a.get(n))).sort((function(e,a){return e.value-a.value}));return Object(v.a)(Object(v.a)({},r),{},{scale:n,entries:c})})),o(c);case 30:case"end":return e.stop()}}),e,null,[[7,14],[16,26]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){if(s){var e=["OTHER"];q.forEach((function(t){var n=t.name,r=t.dataType;a[n]&&e.push(r)}));var t=s.map((function(a){var t=a.entries,n=Object(b.a)(a,["entries"]);return Object(v.a)(Object(v.a)({},n),{},{entries:t.filter((function(a){var t=a.dataType,n=void 0===t?"OTHER":t;return e.includes(n)}))})}));j(t)}}),[s,a]),d?Object(n.jsx)(F,{chartScales:d}):null},ee=t(19),ae=t.n(ee),te=(t(76),function(){var e=Object(l.e)(),a=Object(l.f)();return Object(n.jsx)("header",{className:"ControlBar",children:q.map((function(t){var r=t.label,c=t.name;return Object(n.jsxs)("label",{children:[r,Object(n.jsx)("input",{type:"checkbox",name:c,onClick:function(t){return function(t,n){var r=ae.a.parse(a.search,{ignoreQueryPrefix:!0});r[t]=n.currentTarget.checked.toString(),e.push({pathname:a.pathname,search:ae.a.stringify(r)})}(c,t)}})]},c)}))})});t(84);var ne=function(){var e=Object(l.f)(),a=Object(r.useState)(),t=Object(u.a)(a,2),c=t[0],s=t[1];return Object(r.useEffect)((function(){var a=ae.a.parse(e.search,{ignoreQueryPrefix:!0}),t=q.reduce((function(e,t){t.label;var n=t.name;return e[n]="true"===a[n],e}),{});s(t)}),[e]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(te,{}),Object(n.jsx)("div",{className:"App-content",children:c&&Object(n.jsx)($,{optionsConfig:c})})]})},re=function(){return Object(n.jsx)(i.a,{children:Object(n.jsx)(l.a,{path:"/",children:Object(n.jsx)(ne,{})})})},ce=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,86)).then((function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,c=a.getLCP,s=a.getTTFB;t(e),n(e),r(e),c(e),s(e)}))};o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(re,{})}),document.getElementById("root")),ce()}},[[85,1,2]]]);
//# sourceMappingURL=main.b544bb53.chunk.js.map